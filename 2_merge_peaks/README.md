# General workflow after CellRanger for merging

**After from extract.snakefile, please see jupyter notebook for downstream processing and R work**  

Run this workflow after "outs" generated from CellRanger to merge all the data into 1 Seurat Object.

## Note
1) If following since start, accessions.txt should be a list of ALL unique "id"s (in metadata.csv file earlier on)  across experiments to be extracted. **needs to be generated by user 
2) config.yaml "wd" should be your working directory.
3) The metadata$dataset will have the information on which dataset a cell is from.
4) The names of the output files between CellRangerARC and ATAC is different; use the right snakefile.
5) Ensure path in config.yaml ends with "/"

## For successful extraction, directory structure must be as follows
```
.
├── extract.snakefile
├── config.yaml
├── mergePeaks_ARC.R
├── accessions.txt
├── id1
│   ├── outs
│   ├── ...
│   └── ...
└── id2
    ├── outs
    ├── ...
    └── ...

```

**The following new folders will be created within the same directory**

```
...
├── bed
├── filtered_matrix
├── metrics
└── frags

```

mergePeaks_ARC/ATAC can be run now - it will output an ".rds" file with everything merged. 


